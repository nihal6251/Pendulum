/*!
 * @pixi/canvas-sprite - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/canvas-sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
import{SCALE_MODES as t,BLEND_MODES as r}from"@pixi/constants";import{Matrix as e,groupD8 as o}from"@pixi/math";import{canvasUtils as i}from"@pixi/canvas-renderer";import{ExtensionType as n}from"@pixi/core";import{Sprite as a}from"@pixi/sprite";var h=new e,s=function(){function e(t){this.renderer=t}return e.prototype.render=function(e){var n=e._texture,a=this.renderer,s=a.context;if(n.valid){var l=n._frame.width,d=n._frame.height,m=n._frame.width,p=n._frame.height;n.trim&&(o.isVertical(n.rotate)?(m=n.trim.height,p=n.trim.width):(m=n.trim.width,p=n.trim.height));var f=e.transform.worldTransform,u=0,c=0,x=n.baseTexture.getDrawableSource();if(!(n.orig.width<=0||n.orig.height<=0)&&n.valid&&x){a.setBlendMode(e.blendMode,!0),a.context.globalAlpha=e.worldAlpha;var g=n.baseTexture.scaleMode===t.LINEAR;a.smoothProperty&&a.context[a.smoothProperty]!==g&&(s[a.smoothProperty]=g),n.trim?(u=n.trim.width/2+n.trim.x-e.anchor.x*n.orig.width,c=n.trim.height/2+n.trim.y-e.anchor.y*n.orig.height):(u=(.5-e.anchor.x)*n.orig.width,c=(.5-e.anchor.y)*n.orig.height),n.rotate&&(f.copyTo(h),f=h,o.matrixAppendRotationInv(f,n.rotate,u,c),u=0,c=0),u-=m/2,c-=p/2,a.setContextTransform(f,e.roundPixels,1),e.roundPixels&&(u|=0,c|=0);var v=n.baseTexture.resolution,M=a._outerBlend;M&&(s.save(),s.beginPath(),s.rect(u*a.resolution,c*a.resolution,m*a.resolution,p*a.resolution),s.clip()),16777215!==e.tint?(e._cachedTint===e.tint&&e._tintedCanvas.tintId===e._texture._updateID||(e._cachedTint=e.tint,e._tintedCanvas=i.getTintedCanvas(e,e.tint)),s.drawImage(e._tintedCanvas,0,0,Math.floor(l*v),Math.floor(d*v),Math.floor(u*a.resolution),Math.floor(c*a.resolution),Math.floor(m*a.resolution),Math.floor(p*a.resolution))):s.drawImage(x,n._frame.x*v,n._frame.y*v,Math.floor(l*v),Math.floor(d*v),Math.floor(u*a.resolution),Math.floor(c*a.resolution),Math.floor(m*a.resolution),Math.floor(p*a.resolution)),M&&s.restore(),a.setBlendMode(r.NORMAL)}}},e.prototype.destroy=function(){this.renderer=null},e.extension={name:"sprite",type:n.CanvasRendererPlugin},e}();a.prototype._tintedCanvas=null,a.prototype._renderCanvas=function(t){t.plugins.sprite.render(this)};export{s as CanvasSpriteRenderer};
//# sourceMappingURL=canvas-sprite.min.mjs.map
